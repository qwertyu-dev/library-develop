= pytestのparametrizeを使用したテスト記述ガイドライン

== パラメータ化されたテストの基本フォーマット

=== 基本構造

* @pytest.mark.parametrizeデコレータを使用し、入力パラメータと期待値を定義する。
* 複数の入力パラメータがある場合は、それらをまとめて1つの辞書として渡す。
* 期待値は可能な限り具体的な値を使用する。
* 複雑な期待値の場合は、別途ヘルパー関数を定義して使用する。

[source,python]
----
@pytest.mark.parametrize("input_data, expected", [
    ({"a": 1, "b": 2}, 3),
    ({"a": -1, "b": 1}, 0),
])
def test_function_name(input_data, expected):
    assert tested_function(**input_data) == expected
----
== テストケースへのコメント付与ルール

=== コメントの配置

* 各テストケースの右側にインラインコメントを付ける。
* コメントは「# 」で始め、テストケースの説明を簡潔に記述する。

[source,python]
----
@pytest.mark.parametrize("input_data, expected", [
    ({"a": 1, "b": 2}, 3),    # 正の数の加算,1と2から3となる
    ({"a": -1, "b": 1}, 0),   # 絶対値が等しい正と負の数の加算でゼロになる
    ({"a": 0, "b": 0}, 0),    # ゼロ同士の加算により0となる
])
def test_addition(input_data, expected):
    assert add_numbers(**input_data) == expected
----

=== コメントの内容

* テストケースの目的や特殊な条件を明確に説明する。
* 冗長な説明は避け、テストケースの本質を簡潔に記述する。

=== コメントの一貫性

* 全てのテストケースにコメントを付ける。
* コメントのスタイルと詳細度を統一する。

=== 長いコメントの扱い

* コメントが1行に収まらない場合は、複数行コメントを使用するか、テスト関数のdocstringに詳細な説明を記載する。

== テストケースのグループ化と整理

=== 論理的なグループ化

* 関連するテストケースは空行で区切ってグループ化する。
* グループには簡単な説明コメントをつける。

[source,python]
----
@pytest.mark.parametrize("input_data, expected", [
    # 基本的な加算
    ({"a": 1, "b": 2}, 3),             # 正の数の加算,1と2から3を得る
    ({"a": -1, "b": 1}, 0),            # 絶対値が等しい正と負の数の加算でゼロになる

    # エッジケース
    ({"a": 0, "b": 0}, 0),             # ゼロ同士の加算により0となる
    ({"a": 999999, "b": 1}, 1000000),  # 大きな数の加算、99999と1から1000000となる
])
def test_addition(input_data, expected):
    assert add_numbers(**input_data) == expected
----

=== テストケースの順序
* 単純なケースから複雑なケースへ、一般的なケースから特殊なケースへと並べる。
* エッジケースや例外的なケースは、通常のケースの後にグループ化して配置する。
