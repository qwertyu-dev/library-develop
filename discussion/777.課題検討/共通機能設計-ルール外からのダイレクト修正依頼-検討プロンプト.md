<role> あなたは敏腕アプリケーション設計者でその能力で人々を魅了してきました </role>

<検討事項>
マスターテーブルに位置するデータは切り離して管理します
リファレンステーブルなる、組織情報を管理するテーブルに対し
部コード・課GrコードをKeyにしてリファレンステーブルをUpdateします
各所で入力ルール・管理ルールがあり、基づいてデータ整備してリファレンステーブルを保守しているのですが
共通機能設計-ルールの外からのダイレクト修正依頼が発生しました
この際の対応ルールや対応フローを定める必要があります
編集箇所は全体フェーズの２箇所があり
受付フェーズ（前処理を担う）
パターン編集フェーズ（Facade定義に基づき編集定義保有）
</検討事項>

まずは検討事項を理解してください

StepByStepで検討します
いきなり全部実施せず１つづつ検討しますので止まってください


<step>
  <step1>ダイレクト修正依頼発生時の対応パターン定義</step1>
  <step2>ダイレクト修正依頼発生時のマスター更新フロー</step2>
  <step3>ダイレクト修正依頼発生時のダイレクト修正実施詳細フロー</step3>
  <step4>ダイレクト修正依頼発生時のルール取り込み実施詳細フロー</step4>
  <step5>機能設計書目次作成</step5>
  <step6>機能設計書本文作成</step6>
</step>

それではStep1に行きましょう




資源利用権限はすべてがDPコードで制御可能なので不要です
DPコードはPKにはならない構成になります
設定開始、設定終了のカラムを入れてみましょうか



それではStep2に行きましょう
メンテナンスパターンをリストアップの上、それぞれのケースでどのようなデータUpdate作業が必要か、という切り口になります


step3に行きましょう

保守方式は、DPコードテーブルの情報に基づき
リファレンステーブルをUpdateするパッチプログラムを作成し
リファレンステーブルの該当レコードのDPコード更新します
step2で定義した保守パターンになぞらって具体化しましょう


---

step5
パターンは提示ケースでOKです。
では仕様書としてまとめていきます
お題目候補を提示してください
切り出した機能で記載していますので
システム連携、セキュリティ要件、非機能要件、は不要です

<step5>機能設計書目次作成</step5>
ダイレクト修正依頼対応に関する機能設計書の目次を以下のように提案します。

はじめに
1.1. 目的
1.2. 適用範囲
1.3. 用語定義
概要
2.1. 背景
2.2. 課題
2.3. 解決方針
ダイレクト修正依頼対応フロー
3.1. 全体フロー
3.2. ダイレクト修正依頼受付フロー
3.3. 対応パターン判断フロー
対応パターン1: 一時的な対応（ダイレクト修正）
4.1. 概要
4.2. 詳細フロー
4.3. リファレンステーブル更新パッチ作成手順
4.4. パッチ適用手順
4.5. 関連ドキュメント更新手順
対応パターン2: 恒常的な対応（ルール取り込み）
5.1. 概要
5.2. 詳細フロー
5.3. 新ルール定義手順
5.4. 設計書・マニュアル更新手順
5.5. システム修正手順
5.6. テスト・リリース手順
5.7. 関係者周知・教育手順
関連ドキュメント
6.1. マスター定義書
6.2. 運用マニュアル
6.3. その他関連資料
7.今後の課題と展望
8.付録
8.1. 様式・テンプレート
8.2. FAQ


step6
では、各セクションの文書を書いていきましょう
各セクション／サブセクションで１５００文字目安とします
テーブル定義はテーブル形式にしましょう
メンテナンスパターンもテーブル形式にまとめましょう
フローはUMLで書くことにして、PlantUMLにしましょう
出力はマークダウン形式にしましょう
別ファイルに書き出さず1つのテキストに出力してください
セクションごとに書いて、都度止めてください



---

# 検証テーマ

登場人物A,B,Cでディベートさせる→孫さんの動画から
A，B,Cの立場を明確にしてディベートさせる

Claudeに"少し考えればわかるようなことだけを出力しないで"と伝えたら実務レベルの分析結果が出てきた。
